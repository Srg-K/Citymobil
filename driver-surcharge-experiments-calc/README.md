# Проект для платформы AB тестирования ГД за поездки

## Что это
ETl-процесс по расчету экспериментов в ГД за поездки

## Требуется иметь установленными
* git
* make
* python 3.8
* python virtualenv (https://virtualenv.pypa.io/en/latest/index.html)

## Как использовать
* Склонируйте репозиторий себе
* Выполните `make .env` - содаст пустой `.env` файл для указания кастомных настроек БД
* Отредактируйте файл `.env` - переопределите в нем необходимые настройки
 (дефолтные настройки находятся в `.env.dist`)
* Выполните `make install` - установятся зависимости
* Выполните `make run` - запуск скрипта


## Описание процесса
Все результаты хранятся в таблице `segmentation.surcharge_experiment_stats`

### Этапы
1. Получение данных 
2. Процессинг и агрегация
3. Прменение бакетизации и t-теста
4. Залив в segmentation

### Структура
* main.py - основной скрипт пайплайна
* utils.py – конверторы, обработчики, агрегаторы и т.п.
* stat_tests.py - класс со статистическими методами оценки эксперимента
* config.py - конфиг для расчета метрик, константы
* db.py – методы для подключения к бд
* query.py – запросы к бд

